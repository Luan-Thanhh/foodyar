<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      property="og:image"
      content="https://luan-thanhh.github.io/lets-food/assets/img/thumbnail.jpg"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      rel="icon"
      href="/images/favicon.svg"
      type="image/gif"
      sizes="16x16"
    />
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>

  <body>
    <!-- ======== HEADER ======== -->
    <header id="header" class="header">
      <%- include('../../layouts/header.ejs') %>
    </header>

    <% if (session.cart.totalQuantity > 0) { %>
    <section id="blog-home" class="container">
      <h2 class="font-weight-bold pt-5">SHOPPING CART</h2>
      <hr />
    </section>

    <section id="cart-container" class="container my-5">
      <table width="100%">
        <thead>
          <tr>
            <td>Remove</td>
            <td>Image</td>
            <td>Product</td>
            <td>Price</td>
            <td>Quantity</td>
            <td>Total</td>
          </tr>
        </thead>

        <tbody>
          <% if (user) { %> <% products.forEach( function( obj ) { %>
          <tr>
            <td>
              <a href="/reduce/<%= obj.item._id %>"
                ><i class="fa-regular fa-trash-can"></i
              ></a>
            </td>
            <td>
              <img src="<%= obj.item.thumbnail %>" alt="" />
            </td>
            <td>
              <h5><%= obj.item.name %></h5>
            </td>
            <td>
              <h5>
                <%= obj.item.price.toString().replace(/(.)(?=(\d{3})+$)/g,'$1,')
                %> VND
              </h5>
            </td>
            <td>
              <input
                class="w-25 pl-1"
                value="<%= obj.quantity %>"
                type="number"
              />
            </td>
            <td>
              <h5>
                <%= obj.price.toString().replace(/(.)(?=(\d{3})+$)/g,'$1,') %>
                VND
              </h5>
            </td>
          </tr>
          <% }) %> <% } %>
        </tbody>
      </table>
    </section>

    <section id="cart-bottom" class="container">
      <div class="d-flex justify-content-between">
        <h6>Total</h6>
        <p>
          <%= totalPrice.toString().replace(/(.)(?=(\d{3})+$)/g,'$1,') %> VND
        </p>
      </div>
      <div class="d-grid gap-2 d-md-flex justify-content-center">
        <a href="/shopping/checkout" class="btn btn-dark" type="button"
          >CHECKOUT</a
        >
      </div>
    </section>

    <%} else { %>
    <img
      id="cart-empty"
      class="cart__empty mt-header"
      src="/images/empty-cart.jpg"
      alt=""
    /><% } %>

    <!-- ======== FOOTER ======== -->
    <footer id="footer" class="footer container-full">
      <%- include('../../layouts/footer') %>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
    <script src="/javascripts/app.js"></script>
  </body>
</html>
